<form [formGroup]="filterForm">
  <mat-card>
    <mat-card-content>
      <h3>{{ "comic-detail-filter.text.form-title" | translate }}</h3>

      <mat-form-field class="cx-width-100">
        <input
          matInput
          #filterInput
          id="volume-search-text-input"
          [placeholder]="
            'library.list-page.placeholder.filter-comics' | translate
          "
          (keyup)="queryParameterService.onFilterTextChanged(filterInput.value)"
        />
      </mat-form-field>

      <mat-form-field class="cx-filter-field-input">
        <mat-label>{{ "filtering.label.year" | translate }}</mat-label>
        <mat-select
          (selectionChange)="
            queryParameterService.onCoverYearChanged($event.value)
          "
          [value]="(queryParameterService.coverYear$ | async)?.year"
          [disabled]="queryParameterService.filterText$.value?.length > 0"
        >
          <mat-option
            *ngFor="let option of displayableCoverYears"
            [value]="option.value"
          >
            {{ option.label | translate }}
          </mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field class="cx-filter-field-input">
        <mat-label>{{ "filtering.label.month" | translate }}</mat-label>
        <mat-select
          (selectionChange)="
            queryParameterService.onCoverMonthChanged($event.value)
          "
          [value]="(queryParameterService.coverYear$ | async)?.month"
          [disabled]="queryParameterService.filterText$.value?.length > 0"
        >
          <mat-option
            *ngFor="let option of displayableCoverMonths"
            [value]="option.value"
          >
            {{ option.label | translate }}
          </mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field class="cx-filter-field-input">
        <mat-label>{{ "filtering.label.archive-type" | translate }}</mat-label>
        <mat-select
          (selectionChange)="
            queryParameterService.onArchiveTypeChanged($event.value)
          "
          [value]="queryParameterService.archiveType$ | async"
          [disabled]="queryParameterService.filterText$.value?.length > 0"
        >
          <mat-option
            *ngFor="let option of archiveTypeOptions"
            [value]="option.value"
          >
            {{ option.label | translate }}
          </mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field class="cx-filter-field-input">
        <mat-label>{{ "filtering.label.comic-type" | translate }}</mat-label>
        <mat-select
          (selectionChange)="
            queryParameterService.onComicTypeChanged($event.value)
          "
          [value]="queryParameterService.comicType$ | async"
          [disabled]="queryParameterService.filterText$.value?.length > 0"
        >
          <mat-option
            *ngFor="let option of comicTypeOptions"
            [value]="option.value"
          >
            {{ option.label | translate }}
          </mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field class="cx-filter-field-input">
        <mat-label>{{ "filtering.label.page-count" | translate }}</mat-label>
        <mat-select
          (selectionChange)="
            queryParameterService.onPageCountChange($event.value)
          "
          [value]="queryParameterService.pageCount$ | async"
          [disabled]="queryParameterService.filterText$.value?.length > 0"
        >
          <mat-option *ngFor="let option of pageCountOptions" [value]="option">
            {{ option }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </mat-card-content>
    <mat-card-actions>
      <button
        id="close-filters-button"
        mat-flat-button
        class="cx-action-button"
        color="warn"
        (click)="onClose()"
      >
        <mat-icon>close</mat-icon>
        <mat-label>{{ "button.close" | translate }}</mat-label>
      </button>
    </mat-card-actions>
  </mat-card>
</form>
