<cx-navigation-bar
  class="cx-width-100"
  [user]="user"
  [sidebarOpened]="sidenav.opened"
  [accountBarOpened]="accountBar.opened"
  (toggleSidebar)="sidenav.toggle($event)"
  (toggleAccountBar)="accountBar.toggle($event)"
></cx-navigation-bar>

<div *ngIf="busy" id="cx-busy-overlay">
  <div class="cx-centered cx-position-absolute">
    <img [src]="busyIconURL" alt="Busy, please wait..." />
  </div>
</div>

<mat-sidenav-container
  id="app-primary-space"
  class="cx-width-100 cx-height-100"
>
  <mat-sidenav
    id="app-sidenav-container"
    #sidenav
    mode="over"
    (click)="sidenav.close()"
    position="start"
  >
    <cx-side-navigation [user]="user"></cx-side-navigation>
  </mat-sidenav>

  <mat-sidenav
    id="app-account-bar-container"
    #accountBar
    mode="over"
    position="end"
  >
    <cx-edit-account-bar
      *ngIf="!!user"
      [user]="user"
      (closeSidebar)="accountBar.close()"
    ></cx-edit-account-bar>
  </mat-sidenav>

  <mat-sidenav-content #sidebar>
    <div id="app-content-container">
      <router-outlet></router-outlet>
    </div>
  </mat-sidenav-content>
</mat-sidenav-container>

<cx-footer [user]="user"></cx-footer>
