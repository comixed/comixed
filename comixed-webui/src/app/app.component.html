<cx-navigation-bar
  [user]="user"
  [sidebarOpened]="sidenav.opened"
  (toggleSidebar)="sidenav.toggle($event)"
  (toggleAccountBar)="accountBar.toggle($event)"
></cx-navigation-bar>

<div *ngIf="busy" class="cx-overlay cx-width-100 cx-height-100">
  <div class="cx-centered cx-position-absolute">
    <img [src]="busyIconURL" alt="Busy, please wait..." />
  </div>
</div>

<mat-sidenav-container
  id="app-primary-space"
  class="cx-width-100 cx-height-100"
>
  <mat-sidenav #sidenav mode="over" (click)="sidenav.close()">
    <cx-side-navigation [user]="user"></cx-side-navigation>
  </mat-sidenav>

  <mat-sidenav
    #accountBar
    class="cx-width-50 cx-min-width-50 cx-padding-5"
    mode="over"
    position="end"
  >
    <cx-edit-account-bar
      *ngIf="!!user"
      class="cx-padding-5"
      [user]="user"
      (closeSidebar)="accountBar.close()"
    ></cx-edit-account-bar>
  </mat-sidenav>

  <mat-sidenav-content #sidebar>
    <div class="cx-width-100 cx-overflow-y-scroll cx-footer-margin">
      <router-outlet></router-outlet>
    </div>
  </mat-sidenav-content>
</mat-sidenav-container>

<cx-footer [user]="user"></cx-footer>
