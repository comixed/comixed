<h2>{{ "scraping-page.page-title" | translate }}</h2>

<div
  *ngIf="(selectedIds?.length || 0) === 0"
  class="cx-width-100 cx-align-content-center"
>
  <p>{{ "scraping-page.inactive.page-content" | translate }}</p>

  <button
    id="cx-show-all-comics-button"
    class="cx-action-button"
    mat-raised-button
    color="primary"
    routerLink="/library/all"
  >
    <mat-icon>library_books</mat-icon>
    <mat-label>
      {{ "scraping-page.button.show-all-comics" | translate }}
    </mat-label>
  </button>
</div>

<div
  *ngIf="selectedIds?.length > 0"
  class="cx-horizontal-container cx-width-100"
>
  <div class="cx-max-width-25">
    <div class="cx-vertical-container cx-width-100">
      <div *ngIf="!!currentComic" class="cx-grow-1 cx-width-100">
        <h3 class="cx-text-nowrap">
          {{
            "scraping.current-comic.title" | translate: { count: comics.length }
          }}
        </h3>
        <cx-comic-page
          [imageUrl]="currentComic?.detail | comicCoverUrl"
        ></cx-comic-page>
      </div>
      <div>
        <cx-selected-comics
          [comics]="comics"
          (selectionChanged)="onSelectionChanged($event)"
        ></cx-selected-comics>
      </div>
    </div>
  </div>
  <div class="cx-grow-1">
    <cx-comic-scraping
      *ngIf="!!currentComic && scrapingVolumes.length === 0"
      [comic]="currentComic"
      [metadataSource]="metadataSource"
      [skipCache]="skipCache"
      [maximumRecords]="maximumRecords"
      [multimode]="true"
      (scrape)="onScrape($event)"
    ></cx-comic-scraping>
    <cx-scraping-volume-selection
      *ngIf="scrapingVolumes.length > 0"
      [comicBook]="currentComic"
      [metadataSource]="metadataSource"
      [comicSeriesName]="currentSeries"
      [comicVolume]="currentVolume"
      [comicIssueNumber]="this.currentIssueNumber"
      [skipCache]="skipCache"
      [pageSize]="pageSize"
      [multimode]="true"
      [volumes]="scrapingVolumes"
    ></cx-scraping-volume-selection>
  </div>
</div>
